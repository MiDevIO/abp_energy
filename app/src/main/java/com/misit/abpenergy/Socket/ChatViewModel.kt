package com.misit.abpenergy.Socketimport android.util.Logimport androidx.lifecycle.MutableLiveDataimport androidx.lifecycle.ViewModelimport com.misit.abpenergy.Main.Model.DataUsersModelimport io.socket.client.Socketclass ChatViewModel:ViewModel() {    private var chatUser: MutableLiveData<ArrayList<String>>    private var mSocket: Socket?=null    private var chat :ArrayList<String>    init {        chat = ArrayList()        SocketHandler.setSocket()        SocketHandler.establishConnection()        mSocket = SocketHandler.getSocket()        chatUser = MutableLiveData()    }    fun chatObserver():MutableLiveData<ArrayList<String>>{        return chatUser    }    fun readChat(){        mSocket?.on("newMessage",{            chat?.clear()            if(it[0]!=null){                var pesan = it[0] as String                chat.add(pesan)                chatUser.postValue(chat)            }        })    }    fun sendChat(pesan:String){        mSocket?.emit("newMessage",pesan)        Log.d("newMessage","c $pesan")    }    fun destroyChat(){        SocketHandler.closeConnection()    }}