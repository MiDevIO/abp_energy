package com.misit.abpenergy.Inspeksiimport androidx.appcompat.app.AppCompatActivityimport android.os.Bundleimport android.util.Logimport android.view.Viewimport androidx.recyclerview.widget.LinearLayoutManagerimport com.misit.abpenergy.Api.ApiClientimport com.misit.abpenergy.Api.ApiEndPointimport com.misit.abpenergy.Api.ApiEndPointTwoimport com.misit.abpenergy.Inspeksi.Adapter.*import com.misit.abpenergy.Inspeksi.Response.TeamInspeksiTempItemimport com.misit.abpenergy.Inspeksi.Response.TeamInspeksiTempResponseimport com.misit.abpenergy.Rimport com.misit.abpenergy.Utils.PopupUtilimport kotlinx.android.synthetic.main.activity_detail_inspeksi.*import retrofit2.Callimport retrofit2.Callbackimport retrofit2.Responseclass DetailInspeksiActivity : AppCompatActivity() {    private var teamAdapter : TeamInspeksiAdapter?=null    private var picaAdapter : PicaDetailAdapter?=null    private var teamList:MutableList<TeamInspeksiTempItem>?=null    private var picaList:MutableList<ItemPicaDetail>?=null    override fun onCreate(savedInstanceState: Bundle?) {        super.onCreate(savedInstanceState)        setContentView(R.layout.activity_detail_inspeksi)        var idInspeksi = intent.getStringExtra("idInspeksi")        var tglInspeksi = intent.getStringExtra("tglInspeksi")        var perusahaanInspeksi = intent.getStringExtra("perusahaanInspeksi")        var lokasiInspeksi = intent.getStringExtra("lokasiInspeksi")        var saranInspeksi = intent.getStringExtra("saranInspeksi")        var namaInspeksi = intent.getStringExtra("namaInspeksi")        title = namaInspeksi        teamList=ArrayList()        picaList=ArrayList()        pullRefreshNewInspeksi.visibility = View.GONE        lnLoadingNewInspeksi.visibility = View.VISIBLE        val linearLayoutManager1 = LinearLayoutManager(this@DetailInspeksiActivity)        val linearLayoutManager2 = LinearLayoutManager(this@DetailInspeksiActivity)        teamAdapter = TeamInspeksiAdapter(this@DetailInspeksiActivity,teamList!!)        rvTeamInspeksiDetail?.layoutManager = linearLayoutManager2        rvTeamInspeksiDetail.adapter=teamAdapter        picaAdapter = PicaDetailAdapter(this@DetailInspeksiActivity,picaList!!)        rvPicaInspeksiDetail?.layoutManager = linearLayoutManager1        rvPicaInspeksiDetail.adapter=picaAdapter!!    }    private fun listPica(idInspeksi:String){        picaList?.clear()        PopupUtil.showProgress(this@DetailInspeksiActivity,"Loading...","Sedang Memproses . . .!")        val apiEndPoint = ApiClient.getClient(this@DetailInspeksiActivity)!!.create(ApiEndPointTwo::class.java)        val call = apiEndPoint.listInspeksiPica(idInspeksi)        call?.enqueue(object : Callback<InspeksiPicaDetail> {            override fun onResponse(                call: Call<InspeksiPicaDetail>,                response: Response<InspeksiPicaDetail>            ) {                var r = response.body()                if(r!=null){                    picaList?.addAll(r!!.inspeksiPica!!)                    picaAdapter?.notifyDataSetChanged()                    PopupUtil.dismissDialog()                }else{                    PopupUtil.dismissDialog()                }            }            override fun onFailure(call: Call<InspeksiPicaDetail>, t: Throwable) {                PopupUtil.dismissDialog()                Log.d("ErrorPica",t.toString())            }        })    }    private fun loadTeamInspeksi(idTemp:String){//        PopupUtil.showProgress(this@NewInspeksiActivity,"Loading...","Memuat Team Inspeksi!")        val apiEndPoint = ApiClient.getClient(this@DetailInspeksiActivity)!!.create(ApiEndPoint::class.java)        val call = apiEndPoint.teamInspeksiTemp(idTemp)        call?.enqueue(object : Callback<TeamInspeksiTempResponse> {            override fun onResponse(                call: Call<TeamInspeksiTempResponse>,                response: Response<TeamInspeksiTempResponse>            ) {                var r = response.body()                if(r!=null){                    if(r.teamInspeksiTemp!=null)                    {                        var team = r!!.teamInspeksiTemp                        teamList?.addAll(team!!)                        teamAdapter?.notifyDataSetChanged()                        PopupUtil.dismissDialog()                    }else{                        Log.d("ErrorLoadTeam",r.toString())                        PopupUtil.dismissDialog()                    }                    PopupUtil.dismissDialog()                }else{                    Log.d("ErrorLoadTeam",r.toString())                    PopupUtil.dismissDialog()                }            }            override fun onFailure(call: Call<TeamInspeksiTempResponse>, t: Throwable) {                Log.d("ErrorLoadTeam",t.toString())                PopupUtil.dismissDialog()            }        })    }}